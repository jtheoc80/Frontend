# Valve Chain 前端应用程序

这个项目是一个基于 React 的前端应用程序，用于通过基于区块链的采购订单 (PO) 管理阀门供应链操作。它提供了用于创建、管理和跟踪阀门供应链不同阶段采购订单的综合工具。

> **翻译说明**: 本文档基于英文版本翻译，如有疑问请参考原始英文文档。

## 功能特性

### 制造商仪表板令牌计数器

制造商仪表板现在包含一个实时令牌计数器，显示区块链上当前活跃的终身令牌数量。计数器包括：

- **实时更新**: 每30秒自动刷新以显示当前令牌数量
- **手动刷新**: 点击刷新按钮 (↻) 立即更新计数
- **实时令牌计数**: 显示活跃令牌总数，带千位分隔符（例如："1,247"）
- **连接状态**: 使用模拟数据时显示"演示模式"指示器
- **加载状态**: 刷新操作期间的视觉反馈
- **错误处理**: 优雅处理连接问题，具有重试功能
- **响应式设计**: 适应不同屏幕尺寸，保持可见性

计数器显著地显示在制造商仪表板的右上角，当新阀门通过界面进行代币化时会自动增加。

## 可用脚本

在项目目录中，您可以运行：

### `npm start`

在开发模式下运行应用程序。\
打开 [http://localhost:3000](http://localhost:3000) 在浏览器中查看。

当您进行更改时页面会重新加载。\
您还可能在控制台中看到任何 lint 错误。

### `npm test`

在交互式监视模式下启动测试运行器。\
包括 PO 工作流组件的综合组件测试和快照测试。

### `npm run build`

将应用程序构建到 `build` 文件夹中以用于生产。\
它正确地将 React 打包在生产模式下，并优化构建以获得最佳性能。

构建被最小化，文件名包含哈希值。\
您的应用程序已准备好部署！

## 采购订单 (PO) 工作流

应用程序支持综合的3阶段阀门供应链工作流：

### 第1阶段：分销商 → 制造商
- **目的**: 分销商向制造商的初始库存订单
- **组件**: `CreatePOForm`, `POList`
- **关键功能**:
  - 阀门规格（直径、压力、温度、材料）
  - 制造商认证跟踪
  - 运输和交付条款
  - 保修和付款条款

### 第2阶段：工厂 → 分销商
- **目的**: 工厂向配送中心请购阀门
- **关键功能**:
  - 工厂特定要求
  - 紧急程度级别（低、中、高、关键）
  - 项目和预算代码跟踪
  - 应用特定详细信息

### 第3阶段：维修服务 → 工厂
- **目的**: 维修服务向工厂开具维修服务发票
- **关键功能**:
  - 服务类型跟踪（维护、修理、大修、测试、校准）
  - 工时和费率
  - 零部件使用跟踪
  - 带税收计算的发票详细信息

## 环境变量

在根目录中创建 `.env` 文件，包含以下变量：

```bash
# 区块链配置
PO_CONTRACT_ADDRESS=0x...  # PO 管理智能合约地址
ETHEREUM_RPC_URL=http://localhost:8545  # 以太坊节点 URL
CHAIN_ID=1337  # 网络链 ID

# 应用程序配置
REACT_APP_API_BASE_URL=http://localhost:3001  # 后端 API URL
REACT_APP_ENVIRONMENT=development  # 环境（开发、预发布、生产）

# 可选：钱包配置
REACT_APP_WALLET_CONNECT_PROJECT_ID=your_project_id  # WalletConnect 项目 ID
REACT_APP_INFURA_API_KEY=your_infura_key  # 生产环境的 Infura API 密钥

# 可选：监控和分析
REACT_APP_SENTRY_DSN=your_sentry_dsn  # 错误跟踪
REACT_APP_ANALYTICS_ID=your_analytics_id  # 分析跟踪
```

## 架构

### 区块链集成
- 用于 PO 管理的智能合约
- 基于以太坊的交易处理
- MetaMask 钱包集成
- 用于文档存储的 IPFS

## 开发

### 先决条件
- Node.js 16+
- npm 或 yarn
- MetaMask 浏览器扩展
- 本地以太坊节点（可选）

### 设置
```bash
npm install
cp .env.example .env  # 配置环境变量
npm start
```

### 贡献
1. 遵循现有代码模式
2. 为新组件添加测试
3. 更新文档
4. 确保 TypeScript 合规性

## 部署

### 生产构建
```bash
npm run build
```

### 特定环境构建
- **开发环境**: 使用模拟数据进行本地测试
- **预发布环境**: 测试网集成
- **生产环境**: 主网部署

## 安全考虑

- 所有区块链交易都需要用户确认
- 私钥永远不会存储在应用程序中
- 所有表单字段的输入验证
- 安全的 API 通信
- 定期依赖项更新

## 了解更多

您可以了解更多关于所使用技术的信息：

- [React 文档](https://reactjs.org/)
- [TypeScript 文档](https://www.typescriptlang.org/)
- [以太坊开发](https://ethereum.org/developers/)
- [Testing Library 文档](https://testing-library.com/)

---

**翻译版本**: 基于英文版本 v0.1.0
**最后更新**: 2024年8月
**翻译状态**: 完整翻译，需要技术专家审核